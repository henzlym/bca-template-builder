(()=>{"use strict";var e,t={978:(e,t,a)=>{var n=a(981),l=a(307),r=(a(736),a(771)),o=a(609),s=a(196),i=a(175),c=a(225);const u=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":2,"name":"bca/post-card","version":"0.1.0","title":"Post Card","category":"widgets","icon":"layout","description":"Select post card.","attributes":{"categorySettings":{"type":"object","default":{"show":true}},"excerptSettings":{"type":"object","default":{"show":true}},"edits":{"type":"object","default":{}},"index":{"type":"number"},"metaSettings":{"type":"object","default":{"author":{"show":true,"showIcon":false},"date":{"show":true}}},"titleSettings":{"type":"object","default":{"fontSize":"22px","title":""}},"thumbnailSettings":{"type":"object","default":{"show":true,"alignment":"","size":"thumbnail"}}},"supports":{"anchor":true,"className":true,"html":false},"usesContext":["bca-template-builder/query","bca-template-builder/postSettings","bca-template-builder/post","bca-template-builder/textAlignment","posts","isLoading","layout"],"textdomain":"bca-post-card","editorScript":"file:./index.js","editorStyle":"file:./index.css","style":"file:./style-index.css"}');(0,n.registerBlockType)(u,{edit:function(e){const{attributes:t,context:a}=e,{"bca-template-builder/postSettings":n,isLoading:u,posts:m}=a,{index:p}=t;let{categorySettings:g,excerptSettings:d,metaSettings:h,thumbnailSettings:b,titleSettings:w}=n;const[v]=(0,l.useState)(m[p]),{date:y,excerpt:{rendered:f},title:{raw:E}}=v,[S,_]=(0,l.useState)(!1),x=(0,l.useMemo)((()=>w.title?w.title:E),[w.title]),C=(0,l.useMemo)((()=>{let e=b.size;return(0,c.sX)(v,e)}),[b.size]),k=(0,l.useMemo)((()=>(0,c.Au)(v)),[v.author]),T=(0,l.useMemo)((()=>(0,c.CP)(v)),[v.categories]),z=(0,l.useMemo)((()=>{if(!f)return"";const e=(new window.DOMParser).parseFromString(f,"text/html");return e.body.textContent||e.body.innerText||""}),[f]);let N={...n};0==p&&(console.log("postSettings",N),console.log("templatePostSettings",n));let P=(0,i.useBlockProps)({className:`bca-card ${N.thumbnailSettings.alignment} ${u?"is-loading":""}`});return(0,l.createElement)("div",P,(0,l.createElement)(o.Animate,{type:!S||u?"loading":""},(e=>{let{className:t}=e;return(0,l.createElement)(s.Fragment,null,C&&b.show&&(0,l.createElement)("div",{className:`bca-card_thumbnail_container ${S?"":"is-loading"} ${t}`},(0,l.createElement)("img",{className:"bca-card_thumbnail",src:C,onLoad:e=>{_(!0)}})))})),(0,l.createElement)(o.Animate,{type:u?"loading":""},(e=>{let{className:t}=e;return(0,l.createElement)("div",{className:`bca-card_headline ${t}`},!u&&(0,l.createElement)(s.Fragment,null,T&&g.show&&(0,l.createElement)("span",{className:"bca-card_categories"},T.map((e=>(0,l.createElement)("a",{rel:"category tag"},e)))),(0,l.createElement)("h2",{className:"bca-card_title",style:{fontSize:w.fontSize}},x),(0,l.createElement)("div",{className:"bca-card_byline stacked"},!1!==k&&h.author.show&&(0,l.createElement)("address",{className:"bca-card_author"},!h.author.showIcon&&(0,l.createElement)("span",{className:"bca-card_author_prefix"},"By"),(0,l.createElement)("a",{href:k.link,rel:"author"},h.author.showIcon&&(0,l.createElement)("img",{className:"bca-card_author_avatar",src:k.avatar}),(0,l.createElement)("span",{className:"bca-card_author_name"},k.name))),h.date.show&&(0,l.createElement)("time",null,(0,r.dateI18n)("F j, Y",y))),d.show&&(0,l.createElement)("div",{className:"bca-card_excerpt"},z)))})))}})},225:(e,t,a)=>{a.d(t,{Au:()=>l,CP:()=>o,sX:()=>r}),a(989),a(483);var n=a(819);function l(e){const t=void 0!==e._embedded.author&&e._embedded.author[0];return!1!==t&&(t.avatar=!1,void 0!==e._embedded.author[0].avatar_urls[48]?t.avatar=e._embedded.author[0].avatar_urls[48]:void 0!==e._embedded.author[0].avatar_urls[24]?t.avatar=e._embedded.author[0].avatar_urls[24]:void 0!==e._embedded.author[0].avatar_urls[96]&&(t.avatar=e._embedded.author[0].avatar_urls[96])),t}function r(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"thumbnail";const a=void 0!==e._embedded["wp:featuredmedia"]&&e._embedded["wp:featuredmedia"][0];return a?(0,n.get)(a,["media_details","sizes",t,"source_url"]):a}function o(e){const t=void 0!==e._embedded["wp:term"]&&e._embedded["wp:term"][0];return t?t.map((e=>e.name)):t}},252:(e,t,a)=>{var n=a(981),l=a(307),r=a(736),o=a(175),s=a(609);const i=window.wp.data;var c=a(196);const u=a.p+"images/post-list-1.97080e4d.png",m=a.p+"images/post-list-2.e35f98c1.png",p=a.p+"images/post-feature-1.8775d296.png",g=a.p+"images/post-feature-2.b0b4662a.png",d=e=>{let{value:t,onChange:a}=e;return(0,l.createElement)(s.__experimentalToggleGroupControl,{label:"Layouts:",onChange:a,value:t,isAdaptiveWidth:!0,isBlock:!0},(0,l.createElement)(s.__experimentalToggleGroupControlOption,{value:"list",label:"List"}),(0,l.createElement)(s.__experimentalToggleGroupControlOption,{value:"columns",label:"Columns"}),(0,l.createElement)(s.__experimentalToggleGroupControlOption,{value:"featured",label:"Featured"}),(0,l.createElement)(s.__experimentalToggleGroupControlOption,{value:"slider",label:"Slider"}))},h=()=>(0,l.createElement)(c.Fragment,null,(0,l.createElement)(s.__experimentalRadio,{value:"1"},(0,l.createElement)("img",{src:u})),(0,l.createElement)(s.__experimentalRadio,{value:"2"},(0,l.createElement)("img",{src:m}))),b=()=>(0,l.createElement)(c.Fragment,null,(0,l.createElement)(s.__experimentalRadio,{value:"1"},(0,l.createElement)("img",{src:p})),(0,l.createElement)(s.__experimentalRadio,{value:"2"},(0,l.createElement)("img",{src:g}))),w=e=>{let{attributes:t,checked:a,setAttributes:n}=e;const{layout:r}=t;return(0,l.createElement)(s.BaseControl,{className:"bca-template-select-control",label:""},(0,l.createElement)(s.__experimentalRadioGroup,{label:"Templates:",onChange:e=>{n({template:e})},checked:a},"list"==r&&(0,l.createElement)(h,null),"featured"==r&&(0,l.createElement)(b,null)))};function v(e){let{attributes:t,setAttributes:a}=e;const{columns:n,gridGap:r,layout:o,postSettings:i,template:u}=t;return(0,l.createElement)(s.Panel,null,(0,l.createElement)(s.PanelBody,{title:"Layout settings:"},(0,l.createElement)(d,{value:o,onChange:e=>{let t={layout:e};"list"!==e&&(t.postSettings={...i,thumbnailSettings:{...i.thumbnailSettings,alignment:""}}),"list"==e&&(t.postSettings={...i,thumbnailSettings:{...i.thumbnailSettings,alignment:"left"}}),console.log(o,e),"list"==o&&"columns"==e&&(t.postSettings={...i,thumbnailSettings:{...i.thumbnailSettings,alignment:""}}),a(t)}}),"columns"==o&&(0,l.createElement)(c.Fragment,null,(0,l.createElement)(s.RangeControl,{label:"Columns",allowReset:!0,initialPosition:3,resetFallbackValue:3,value:n,onChange:e=>a({columns:e}),min:2,max:4}),(0,l.createElement)(s.RangeControl,{allowReset:!0,initialPosition:15,label:"Column gap",resetFallbackValue:15,step:5,value:r,onChange:e=>a({gridGap:e})})),"columns"!==o&&(0,l.createElement)(w,{attributes:t,checked:u,setAttributes:a})))}const y=window.wp.primitives,f=(0,l.createElement)(y.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,l.createElement)(y.Path,{d:"M4 18h6V6H4v12zm9-9.5V10h7V8.5h-7zm0 7h7V14h-7v1.5z"})),E=(0,l.createElement)(y.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,l.createElement)(y.Path,{d:"M5 15h14V9H5v6zm0 4.8h14v-1.5H5v1.5zM5 4.2v1.5h14V4.2H5z"})),S=(0,l.createElement)(y.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,l.createElement)(y.Path,{d:"M14 6v12h6V6h-6zM4 10h7V8.5H4V10zm0 5.5h7V14H4v1.5z"}));var _=a(819);function x(e){let{value:t,fallbackFontSize:a=16,onChange:n=null,withSlider:r=!1,withReset:o=!0}=e;const{fontSizes:c}=(0,i.useSelect)((e=>{const{getSettings:t}=e("core/block-editor");return console.log(t()),(0,_.pick)(t(),["fontSizes"])}));return 0==c.length?null:(0,l.createElement)(s.FontSizePicker,{fontSizes:c,value:t,fallbackFontSize:a,onChange:n,withSlider:r,withReset:o})}function C(e){let{size:t,setSize:a}=e;const{imageSizes:n}=(0,i.useSelect)((e=>{const{getSettings:t}=e("core/block-editor");return(0,_.pick)(t(),["imageSizes"])}));if(0==n.length)return null;const r=n.map((e=>({label:e.name,value:e.slug})));return(0,l.createElement)(s.SelectControl,{label:"Image size",value:t,options:r,onChange:a,__nextHasNoMarginBottom:!0})}function k(e){let{postSettings:t,onChange:a}=e;const{metaSettings:n}=t;return(0,l.createElement)(c.Fragment,null,(0,l.createElement)(s.ToggleControl,{label:"Display author",checked:n.author.show,onChange:e=>{a({metaSettings:{...n,author:{...n.author,show:e}}})}}),n.author.show&&(0,l.createElement)(s.ToggleControl,{label:"Display author icon",checked:n.author.showIcon,onChange:e=>{a({metaSettings:{...n,author:{...n.author,showIcon:e}}})}}))}const T=window.wp.compose;a(771),a(225);var z=a(989),N=a.n(z),P=a(483);const A=function(e){let{label:t="",value:a,taxonomy:n="categories",onChange:r}=e;const[o,i]=(0,l.useState)([]),[c,u]=(0,l.useState)([]),[m,p]=(0,l.useState)(""),g=(0,l.useCallback)((0,T.useDebounce)((()=>{if(""==m)return;const e={search:m},t=(0,P.addQueryArgs)(`/wp/v2/${n}`,e);N()({path:t}).then((e=>{if(0==e.length)return;const t=e.map((e=>({id:e.id,name:e.name})));i(t)}))}),500));(0,l.useEffect)((()=>{0!=a.length||u([])}),[a]),(0,l.useEffect)((()=>{m.length<3||g()}),[m]);const d=(0,l.useMemo)((()=>o.map((e=>e.name))),[o]);return(0,l.createElement)(s.FormTokenField,{label:t,value:c,suggestions:d,onChange:e=>{let t=o.filter((t=>e.includes(t.name))).map((e=>e.id));u(e),r(t)},onInputChange:e=>p(e)})};function O(e){let{layout:t,postSettings:a,onChange:n}=e;const{categorySettings:r,excerptSettings:o,metaSettings:i,titleSettings:c,thumbnailSettings:u}=a;return(0,l.createElement)(s.Panel,null,(0,l.createElement)(s.PanelBody,{title:"Post thumbnail settings:",initialOpen:!1},(0,l.createElement)(s.ToggleControl,{label:"Show post thumbnail",checked:u.show,onChange:e=>{n({thumbnailSettings:{...u,show:e}})}}),"list"==t&&(0,l.createElement)(s.__experimentalToggleGroupControl,{label:"Thumbnail alignment",onChange:e=>{n({thumbnailSettings:{...u,alignment:e}})},value:u.alignment},(0,l.createElement)(s.__experimentalToggleGroupControlOptionIcon,{value:"left","aria-label":"Left",icon:f,showTooltip:!0}),(0,l.createElement)(s.__experimentalToggleGroupControlOptionIcon,{value:"","aria-label":"None",icon:E,showTooltip:!0}),(0,l.createElement)(s.__experimentalToggleGroupControlOptionIcon,{value:"right","aria-label":"Right",icon:S,showTooltip:!0})),(0,l.createElement)(C,{size:u.size,setSize:e=>{n({thumbnailSettings:{...u,size:e}})}})),(0,l.createElement)(s.PanelBody,{title:"Post title settings:",initialOpen:!1},(0,l.createElement)(x,{value:c.fontSize,fallbackFontSize:22,onChange:e=>{n({titleSettings:{...c,fontSize:e}})},withSlider:!1,withReset:!0})),(0,l.createElement)(s.PanelBody,{title:"Post content settings:",initialOpen:!1},(0,l.createElement)(s.ToggleControl,{label:"Display excerpt",checked:o.show,onChange:e=>{n({excerptSettings:{...o,show:e}})}})),(0,l.createElement)(s.PanelBody,{title:"Post meta settings:",initialOpen:!1},(0,l.createElement)(k,{postSettings:a,onChange:n}),(0,l.createElement)(s.ToggleControl,{label:"Display date",checked:i.date.show,onChange:e=>{n({metaSettings:{...i,date:{show:e}}})}}),(0,l.createElement)(s.ToggleControl,{label:"Display categories",checked:r.show,onChange:e=>{n({categorySettings:{...r,show:e}})}})))}const $=window.wp.coreData,B=[{label:(0,r.__)("Newest to oldest"),value:"date/desc"},{label:(0,r.__)("Oldest to newest"),value:"date/asc"},{
/* translators: label for ordering posts by title in ascending order */
label:(0,r.__)("A → Z"),value:"title/asc"},{
/* translators: label for ordering posts by title in descending order */
label:(0,r.__)("Z → A"),value:"title/desc"}];function F(e){let{order:t,orderBy:a,onChange:n}=e;return(0,l.createElement)(s.SelectControl,{label:(0,r.__)("Order by"),value:`${a}/${t}`,options:B,onChange:n})}function G(e){let{value:t,onChange:a}=e;const n=(0,i.useSelect)((e=>{const{getPostTypes:t}=e($.store),a=["attachment"],n=t({per_page:-1})?.filter((e=>{let{viewable:t,slug:n}=e;return t&&!a.includes(n)}));return n}),[]);if(!n||0==n.length)return null;const r=n.map((e=>({label:e.labels.singular_name,value:e.slug})));return(0,l.createElement)(s.SelectControl,{label:"Post type",value:t,options:r,onChange:a,__nextHasNoMarginBottom:!0})}function I(e){let{attributes:t,setAttributes:a}=e;const{query:n}=t,{categories:r,tags:c,per_page:u,offset:m,order:p,orderby:g,types:d}=n,{__unstableMarkNextChangeAsNotPersistent:h}=(0,i.useDispatch)(o.store);return(0,l.createElement)(s.Panel,null,(0,l.createElement)(s.PanelBody,{title:"Filtering/Sorting settings:",initialOpen:!1},(0,l.createElement)(G,{value:d,onChange:e=>{a({query:{...n,types:e}})}}),(0,l.createElement)(F,{order:p,orderby:g,onChange:e=>{const[t,l]=e.split("/");a({query:{...n,order:l,orderBy:t}})}}),(0,l.createElement)(A,{label:"Categories",taxonomy:"categories",value:r,onChange:e=>{a({query:{...n,categories:e}})}}),(0,l.createElement)(A,{label:"Tags",taxonomy:"tags",value:c,onChange:e=>{a({query:{...n,tags:e}})}}),(0,l.createElement)(s.TextControl,{type:"number",label:"Number of posts",value:u,onChange:e=>{a({query:{...n,per_page:e}})}}),(0,l.createElement)(s.TextControl,{type:"number",label:"Offset",value:m,onChange:e=>{a({query:{...n,offset:e}})}})))}function j(e){let{attributes:t,setAttributes:a}=e;const{layout:n,postSettings:r}=t;return(0,l.createElement)(o.InspectorControls,{key:"setting"},(0,l.createElement)(v,{attributes:t,setAttributes:a}),(0,l.createElement)(I,{attributes:t,setAttributes:a}),(0,l.createElement)(O,{layout:n,postSettings:r,onChange:e=>{a({postSettings:{...r,...e}})}}))}window.wp.editor;const V=function(e){let{attributes:t,post:a,isLoading:n}=e;const{postSettings:r}=t;return(0,l.createElement)("div",{className:`bca-card ${r.thumbnailAlignment} is-loading`},r.showThumbnail&&(0,l.createElement)(s.Animate,{type:"loading"},(e=>{let{className:t}=e;return(0,l.createElement)("div",{className:`bca-card_thumbnail_container ${t}`})})),(0,l.createElement)(s.Animate,{type:"loading"},(e=>{let{className:t}=e;return(0,l.createElement)("div",{className:`bca-card_headline ${t}`})})))},M=["bca/post-card"];function R(e){let{className:t,style:a,Template:n}=e;const r=(0,o.useInnerBlocksProps)({className:`${t}`,style:a},{allowedBlocks:M,template:n,templateLock:"insert"});return(0,l.createElement)("div",r)}function q(e){let{attributes:t,posts:a,isLoading:n,setAttributes:r}=e;const{columns:s,gridGap:i,layout:c,postSettings:u,query:{per_page:m},template:p,textAlignment:g}=t;if(null==a)return(0,l.createElement)("div",{className:`template-${p} ${c} ${g} ${n} ${"columns"==c?`columns-${s}`:""}`,style:{gridColumnGap:i}},Array.from(Array(m).keys()).map((e=>(0,l.createElement)(V,{attributes:t,post:e,isLoading:n}))));let d=`template-${p} ${c} ${g} ${n} ${"columns"==c?`columns-${s}`:""}`,h=a.map(((e,t)=>["bca/post-card",{index:t}]));return(0,l.createElement)(o.BlockContextProvider,{value:{posts:a,isLoading:n,layout:c}},(0,l.createElement)(R,{className:d,style:{gridColumnGap:i},Template:h}))}function L(e){let{attributes:t,clientId:a,setAttributes:n}=e;const{query:r}=t,{categories:o,_embed:s,per_page:c,tags:u,types:m,order:p,orderby:g}=r,{posts:d}=(0,i.useSelect)((e=>{const t={...o.length>0&&{categories:o},...u.length>0&&{tags:u},context:"edit",_embed:s,per_page:c,order:p,orderby:g};return{posts:e($.store).getEntityRecords("postType","post",t)||[]}}),[o,c,p,g,u,m]);return null==d||0==d.length?[]:(0,l.createElement)(q,{attributes:t,posts:d,isLoading:!1,setAttributes:n})}const D=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":2,"name":"bca/template-builder","version":"0.1.0","title":"Template Builder","category":"widgets","icon":"columns","description":"Select template for posts.","attributes":{"layout":{"type":"string","default":"list"},"postSettings":{"type":"object","default":{"categorySettings":{"show":true},"excerptSettings":{"show":true},"metaSettings":{"author":{"show":true,"showIcon":false},"date":{"show":true}},"titleSettings":{"fontSize":"22px","title":""},"thumbnailSettings":{"show":true,"alignment":"left","size":"thumbnail"}}},"posts":{"type":"array","default":[]},"query":{"type":"object","default":{"_embed":true,"offset":0,"order":"desc","orderby":"date","per_page":4,"types":"posts","categories":[],"tags":[]}},"queryId":{"type":"string","default":""},"template":{"type":"string","default":"1"},"columns":{"type":"number","default":3},"gridGap":{"type":"number","default":15},"textAlignment":{"type":"string","default":"left"}},"providesContext":{"bca-template-builder/query":"query","bca-template-builder/postSettings":"postSettings"},"supports":{"anchor":true,"align":true,"className":true,"color":{"background":true,"link":true,"text":true},"html":false,"spacing":{"margin":true,"padding":true,"blockGap":true}},"textdomain":"bca-template-builder","editorScript":"file:./index.js","editorStyle":"file:./index.css","style":"file:./style-index.css"}');a(978),(0,n.registerBlockType)(D,{edit:function(e){const[t,a]=(0,l.useState)(!1),{attributes:n,clientId:r,setAttributes:s}=e;return(0,l.createElement)("div",(0,o.useBlockProps)(),(0,l.createElement)(j,{attributes:n,clientId:r,setAttributes:s}),(0,l.createElement)(L,{attributes:n,clientId:r,setAttributes:s}))},save:function(){return(0,l.createElement)("div",o.useBlockProps.save(),(0,l.createElement)(o.InnerBlocks.Content,null))}})},196:e=>{e.exports=window.React},819:e=>{e.exports=window.lodash},989:e=>{e.exports=window.wp.apiFetch},175:e=>{e.exports=window.wp.blockEditor},981:e=>{e.exports=window.wp.blocks},609:e=>{e.exports=window.wp.components},771:e=>{e.exports=window.wp.date},307:e=>{e.exports=window.wp.element},736:e=>{e.exports=window.wp.i18n},483:e=>{e.exports=window.wp.url}},a={};function n(e){var l=a[e];if(void 0!==l)return l.exports;var r=a[e]={exports:{}};return t[e](r,r.exports,n),r.exports}n.m=t,e=[],n.O=(t,a,l,r)=>{if(!a){var o=1/0;for(u=0;u<e.length;u++){for(var[a,l,r]=e[u],s=!0,i=0;i<a.length;i++)(!1&r||o>=r)&&Object.keys(n.O).every((e=>n.O[e](a[i])))?a.splice(i--,1):(s=!1,r<o&&(o=r));if(s){e.splice(u--,1);var c=l();void 0!==c&&(t=c)}}return t}r=r||0;for(var u=e.length;u>0&&e[u-1][2]>r;u--)e[u]=e[u-1];e[u]=[a,l,r]},n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var a in t)n.o(t,a)&&!n.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e;n.g.importScripts&&(e=n.g.location+"");var t=n.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var a=t.getElementsByTagName("script");a.length&&(e=a[a.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=e})(),(()=>{var e={826:0,465:0,431:0};n.O.j=t=>0===e[t];var t=(t,a)=>{var l,r,[o,s,i]=a,c=0;if(o.some((t=>0!==e[t]))){for(l in s)n.o(s,l)&&(n.m[l]=s[l]);if(i)var u=i(n)}for(t&&t(a);c<o.length;c++)r=o[c],n.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return n.O(u)},a=globalThis.webpackChunkbca_template_builder=globalThis.webpackChunkbca_template_builder||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))})();var l=n.O(void 0,[431],(()=>n(252)));l=n.O(l)})();