(()=>{"use strict";var e,t={574:(e,t,a)=>{const n=window.wp.blocks,l=window.wp.element,r=window.wp.i18n,o=window.wp.blockEditor,s=window.React,i=window.wp.components,c=a.p+"images/post-list-1.97080e4d.png",u=a.p+"images/post-list-2.e35f98c1.png",m=a.p+"images/post-feature-1.8775d296.png",d=a.p+"images/post-feature-2.b0b4662a.png",g=e=>{let{value:t,onChange:a}=e;return(0,l.createElement)(i.__experimentalToggleGroupControl,{label:"Layouts:",onChange:a,value:t,isAdaptiveWidth:!0,isBlock:!0},(0,l.createElement)(i.__experimentalToggleGroupControlOption,{value:"list",label:"List"}),(0,l.createElement)(i.__experimentalToggleGroupControlOption,{value:"columns",label:"Columns"}),(0,l.createElement)(i.__experimentalToggleGroupControlOption,{value:"featured",label:"Featured"}),(0,l.createElement)(i.__experimentalToggleGroupControlOption,{value:"slider",label:"Slider"}))},p=()=>(0,l.createElement)(s.Fragment,null,(0,l.createElement)(i.__experimentalRadio,{value:"1"},(0,l.createElement)("img",{src:c})),(0,l.createElement)(i.__experimentalRadio,{value:"2"},(0,l.createElement)("img",{src:u}))),h=()=>(0,l.createElement)(s.Fragment,null,(0,l.createElement)(i.__experimentalRadio,{value:"1"},(0,l.createElement)("img",{src:m})),(0,l.createElement)(i.__experimentalRadio,{value:"2"},(0,l.createElement)("img",{src:d}))),b=e=>{let{attributes:t,checked:a,setAttributes:n}=e;const{layout:r}=t;return(0,l.createElement)(i.BaseControl,{className:"bca-template-select-control",label:""},(0,l.createElement)(i.__experimentalRadioGroup,{label:"Templates:",onChange:e=>{n({template:e})},checked:a},"list"==r&&(0,l.createElement)(p,null),"featured"==r&&(0,l.createElement)(h,null)))};function w(e){let{attributes:t,setAttributes:a}=e;const{columns:n,gridGap:r,layout:o,postSettings:c,template:u}=t;return(0,l.createElement)(i.Panel,null,(0,l.createElement)(i.PanelBody,{title:"Layout settings:"},(0,l.createElement)(g,{value:o,onChange:e=>{let t={layout:e};"list"!==e&&(t.postSettings={...c,thumbnailAlignment:""}),"list"==e&&(t.postSettings={...c,thumbnailAlignment:"left"}),a(t)}}),"columns"==o&&(0,l.createElement)(s.Fragment,null,(0,l.createElement)(i.RangeControl,{label:"Columns",allowReset:!0,initialPosition:3,resetFallbackValue:3,value:n,onChange:e=>a({columns:e}),min:2,max:4}),(0,l.createElement)(i.RangeControl,{allowReset:!0,initialPosition:15,label:"Column gap",resetFallbackValue:15,step:5,value:r,onChange:e=>a({gridGap:e})})),"columns"!==o&&(0,l.createElement)(b,{attributes:t,checked:u,setAttributes:a})))}const E=window.lodash,v=window.wp.data,f=window.wp.primitives,_=(0,l.createElement)(f.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,l.createElement)(f.Path,{d:"M4 18h6V6H4v12zm9-9.5V10h7V8.5h-7zm0 7h7V14h-7v1.5z"})),y=(0,l.createElement)(f.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,l.createElement)(f.Path,{d:"M5 15h14V9H5v6zm0 4.8h14v-1.5H5v1.5zM5 4.2v1.5h14V4.2H5z"})),C=(0,l.createElement)(f.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,l.createElement)(f.Path,{d:"M14 6v12h6V6h-6zM4 10h7V8.5H4V10zm0 5.5h7V14H4v1.5z"}));function S(e){let{value:t,fallbackFontSize:a=16,onChange:n=null,withSlider:r=!1,withReset:o=!0}=e;const{fontSizes:s}=(0,v.useSelect)((e=>{const{getSettings:t}=e("core/block-editor");return console.log(t()),(0,E.pick)(t(),["fontSizes"])}));return 0==s.length?null:(0,l.createElement)(i.FontSizePicker,{fontSizes:s,value:t,fallbackFontSize:a,onChange:n,withSlider:r,withReset:o})}function x(e){let{size:t,setSize:a}=e;const{imageSizes:n}=(0,v.useSelect)((e=>{const{getSettings:t}=e("core/block-editor");return console.log(t()),(0,E.pick)(t(),["imageSizes"])}));if(0==n.length)return null;const r=n.map((e=>({label:e.name,value:e.slug})));return(0,l.createElement)(i.SelectControl,{label:"Image size",value:t,options:r,onChange:a,__nextHasNoMarginBottom:!0})}function A(e){const{attributes:{postSettings:t},setAttributes:a}=e;return(0,l.createElement)(s.Fragment,null,(0,l.createElement)(i.ToggleControl,{label:"Display author",checked:t.showAuthor,onChange:e=>{a({postSettings:{...t,showAuthor:e}})}}),t.showAuthor&&(0,l.createElement)(i.ToggleControl,{label:"Display author icon",checked:t.showAuthorIcon,onChange:e=>{a({postSettings:{...t,showAuthorIcon:e}})}}))}const T=window.wp.compose,k=window.wp.date,z=window.wp.apiFetch;var N=a.n(z);const O=window.wp.url;function $(e){let{post:t,index:a,attributes:n,setAttributes:r}=e;const[o,c]=(0,l.useState)(!1),{date:u,excerpt:{rendered:m},title:{raw:d}}=o,{posts:g}=n;return(0,l.useEffect)((()=>{console.log(o)}),[d]),(0,l.createElement)(s.Fragment,null,(0,l.createElement)(i.Dropdown,{className:"bca-card_dropdown",contentClassName:"bca-card_modal",headerTitle:"Search posts",position:"top right",renderToggle:e=>{let{isOpen:t,onToggle:a}=e;return(0,l.createElement)(i.Button,{variant:"primary",onClick:a,"aria-expanded":t},"Edit")},renderContent:()=>(0,l.createElement)(s.Fragment,null,(0,l.createElement)(i.TextControl,{label:"Title",value:d,onChange:e=>{var t;t={title:e},console.log(o),console.log(t),console.log({...o,update:t})}}))}))}const F=function(e){let{label:t="",value:a,taxonomy:n="categories",onChange:r}=e;const[o,s]=(0,l.useState)([]),[c,u]=(0,l.useState)([]),[m,d]=(0,l.useState)(""),g=(0,l.useCallback)((0,T.useDebounce)((()=>{if(""==m)return;const e={search:m},t=(0,O.addQueryArgs)(`/wp/v2/${n}`,e);N()({path:t}).then((e=>{if(0==e.length)return;const t=e.map((e=>({id:e.id,name:e.name})));s(t)}))}),500));(0,l.useEffect)((()=>{0!=a.length||u([])}),[a]),(0,l.useEffect)((()=>{m.length<3||g()}),[m]);const p=(0,l.useMemo)((()=>o.map((e=>e.name))),[o]);return(0,l.createElement)(i.FormTokenField,{label:t,value:c,suggestions:p,onChange:e=>{let t=o.filter((t=>e.includes(t.name))).map((e=>e.id));u(e),r(t)},onInputChange:e=>d(e)})};function P(e){let{attributes:t,setAttributes:a}=e;const{layout:n,postSettings:r}=t;return(0,l.createElement)(i.Panel,null,(0,l.createElement)(i.PanelBody,{title:"Post thumbnail settings:",initialOpen:!1},(0,l.createElement)(i.ToggleControl,{label:"Show post thumbnail",checked:r.showThumbnail,onChange:e=>{a({postSettings:{...r,showThumbnail:e}})}}),"list"==n&&(0,l.createElement)(i.__experimentalToggleGroupControl,{label:"Thumbnail alignment",onChange:e=>{a({postSettings:{...r,thumbnailAlignment:e}})},value:r.thumbnailAlignment},(0,l.createElement)(i.__experimentalToggleGroupControlOptionIcon,{value:"left","aria-label":"Left",icon:_,showTooltip:!0}),(0,l.createElement)(i.__experimentalToggleGroupControlOptionIcon,{value:"","aria-label":"None",icon:y,showTooltip:!0}),(0,l.createElement)(i.__experimentalToggleGroupControlOptionIcon,{value:"right","aria-label":"Right",icon:C,showTooltip:!0})),(0,l.createElement)(x,{value:r.thumbnailSize,setSize:e=>{a({postSettings:{...r,thumbnailSize:e}})}})),(0,l.createElement)(i.PanelBody,{title:"Post title settings:",initialOpen:!1},(0,l.createElement)(S,{value:r.titleFontSize,fallbackFontSize:22,onChange:e=>{a({postSettings:{...r,titleFontSize:e}})},withSlider:!1,withReset:!0})),(0,l.createElement)(i.PanelBody,{title:"Post content settings:",initialOpen:!1},(0,l.createElement)(i.ToggleControl,{label:"Display excerpt",checked:r.showExcerpt,onChange:e=>{a({postSettings:{...r,showExcerpt:e}})}})),(0,l.createElement)(i.PanelBody,{title:"Post meta settings:",initialOpen:!1},(0,l.createElement)(A,{attributes:t,setAttributes:a}),(0,l.createElement)(i.ToggleControl,{label:"Display date",checked:r.showDate,onChange:e=>{a({postSettings:{...r,showDate:e}})}}),(0,l.createElement)(i.ToggleControl,{label:"Display categories",checked:r.showCategories,onChange:e=>{a({postSettings:{...r,showCategories:e}})}})))}const B=window.wp.coreData,G=[{label:(0,r.__)("Newest to oldest"),value:"date/desc"},{label:(0,r.__)("Oldest to newest"),value:"date/asc"},{
/* translators: label for ordering posts by title in ascending order */
label:(0,r.__)("A → Z"),value:"title/asc"},{
/* translators: label for ordering posts by title in descending order */
label:(0,r.__)("Z → A"),value:"title/desc"}];function V(e){let{order:t,orderBy:a,onChange:n}=e;return(0,l.createElement)(i.SelectControl,{label:(0,r.__)("Order by"),value:`${a}/${t}`,options:G,onChange:n})}function M(e){let{value:t,onChange:a}=e;const n=(0,v.useSelect)((e=>{const{getPostTypes:t}=e(B.store),a=["attachment"],n=t({per_page:-1})?.filter((e=>{let{viewable:t,slug:n}=e;return t&&!a.includes(n)}));return n}),[]);if(0==n.length)return null;const r=n.map((e=>({label:e.labels.singular_name,value:e.slug})));return(0,l.createElement)(i.SelectControl,{label:"Post type",value:t,options:r,onChange:a,__nextHasNoMarginBottom:!0})}function R(e){let{attributes:t,setAttributes:a}=e;const{query:n}=t,{categories:r,tags:o,per_page:s,offset:c,order:u,orderby:m,types:d}=n;return(0,l.createElement)(i.Panel,null,(0,l.createElement)(i.PanelBody,{title:"Filtering/Sorting settings:",initialOpen:!1},(0,l.createElement)(M,{value:d,onChange:e=>{a({query:{...n,types:e}})}}),(0,l.createElement)(V,{order:u,orderby:m,onChange:e=>{const[t,l]=e.split("/");a({query:{...n,order:l,orderBy:t}})}}),(0,l.createElement)(F,{label:"Categories",taxonomy:"categories",value:r,onChange:e=>{a({query:{...n,categories:e}})}}),(0,l.createElement)(F,{label:"Tags",taxonomy:"tags",value:o,onChange:e=>{a({query:{...n,tags:e}})}}),(0,l.createElement)(i.TextControl,{type:"number",label:"Number of posts",value:s,onChange:e=>a({query:{...n,per_page:e}})}),(0,l.createElement)(i.TextControl,{type:"number",label:"Offset",value:c,onChange:e=>a({query:{...n,offset:e}})})))}function D(e){let{attributes:t,setAttributes:a}=e;return(0,l.createElement)(o.InspectorControls,{key:"setting"},(0,l.createElement)(w,{attributes:t,setAttributes:a}),(0,l.createElement)(R,{attributes:t,setAttributes:a}),(0,l.createElement)(P,{attributes:t,setAttributes:a}))}function I(e){let{attributes:t,index:a,isLoading:n,post:r,setAttributes:o}=e;const{postSettings:c}=t,{date:u,excerpt:{rendered:m},title:{raw:d}}=r,[g,p]=(0,l.useState)(!1),h=(0,l.useMemo)((()=>function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"thumbnail";const a=void 0!==e._embedded["wp:featuredmedia"]&&e._embedded["wp:featuredmedia"][0];return a?(0,E.get)(a,["media_details","sizes",t,"source_url"]):a}(r,c.thumbnailSize)),[c.thumbnailSize,r.featured_media]),b=(0,l.useMemo)((()=>function(e){const t=void 0!==e._embedded.author&&e._embedded.author[0];return!1!==t&&(t.avatar=!1,void 0!==e._embedded.author[0].avatar_urls[48]?t.avatar=e._embedded.author[0].avatar_urls[48]:void 0!==e._embedded.author[0].avatar_urls[24]?t.avatar=e._embedded.author[0].avatar_urls[24]:void 0!==e._embedded.author[0].avatar_urls[96]&&(t.avatar=e._embedded.author[0].avatar_urls[96])),t}(r)),[r.author]),w=(0,l.useMemo)((()=>function(e){const t=void 0!==e._embedded["wp:term"]&&e._embedded["wp:term"][0];return t?t.map((e=>e.name)):t}(r)),[r.categories]),v=(0,l.useMemo)((()=>{if(!m)return"";const e=(new window.DOMParser).parseFromString(m,"text/html");return e.body.textContent||e.body.innerText||""}),[m]);return(0,l.createElement)("div",{className:`bca-card ${c.thumbnailAlignment} ${n?"is-loading":""}`},(0,l.createElement)($,{post:r,index:a,attributes:t,setAttributes:o}),(0,l.createElement)(i.Animate,{type:!g||n?"loading":""},(e=>{let{className:t}=e;return(0,l.createElement)(s.Fragment,null,h&&c.showThumbnail&&(0,l.createElement)("div",{className:`bca-card_thumbnail_container ${g?"":"is-loading"} ${t}`},(0,l.createElement)("img",{className:"bca-card_thumbnail",src:h,onLoad:e=>{p(!0)}})))})),(0,l.createElement)(i.Animate,{type:n?"loading":""},(e=>{let{className:t}=e;return(0,l.createElement)("div",{className:`bca-card_headline ${t}`},!n&&(0,l.createElement)(s.Fragment,null,w&&c.showCategories&&(0,l.createElement)("span",{className:"bca-card_categories"},w.map((e=>(0,l.createElement)("a",{rel:"category tag"},e)))),(0,l.createElement)("h2",{className:"bca-card_title",style:{fontSize:c.titleFontSize}},d),(0,l.createElement)("div",{className:"bca-card_byline stacked"},!1!==b&&c.showAuthor&&(0,l.createElement)("address",{className:"bca-card_author"},!c.showAuthorIcon&&(0,l.createElement)("span",{className:"bca-card_author_prefix"},"By"),(0,l.createElement)("a",{href:b.link,rel:"author"},c.showAuthorIcon&&(0,l.createElement)("img",{className:"bca-card_author_avatar",src:b.avatar}),(0,l.createElement)("span",{className:"bca-card_author_name"},b.name))),c.showDate&&(0,l.createElement)("time",null,(0,k.dateI18n)("F j, Y",u))),c.showExcerpt&&(0,l.createElement)("div",{className:"bca-card_excerpt"},v)))})))}const j=function(e){let{attributes:t,post:a,isLoading:n}=e;const{postSettings:r}=t;return(0,l.createElement)("div",{className:`bca-card ${r.thumbnailAlignment} is-loading`},r.showThumbnail&&(0,l.createElement)(i.Animate,{type:"loading"},(e=>{let{className:t}=e;return(0,l.createElement)("div",{className:`bca-card_thumbnail_container ${t}`})})),(0,l.createElement)(i.Animate,{type:"loading"},(e=>{let{className:t}=e;return(0,l.createElement)("div",{className:`bca-card_headline ${t}`})})))};function L(e){let{attributes:t,posts:a,isLoading:n,setAttributes:r}=e;const{columns:o,gridGap:s,layout:i,query:{per_page:c},template:u,textAlignment:m}=t;return null==a?(0,l.createElement)("div",{className:`template-${u} ${i} ${m} ${n} ${"columns"==i?`columns-${o}`:""}`,style:{gridColumnGap:s}},Array.from(Array(c).keys()).map((e=>(0,l.createElement)(j,{attributes:t,post:e,isLoading:n})))):(0,l.createElement)("div",{className:`template-${u} ${i} ${m} ${n} ${"columns"==i?`columns-${o}`:""}`,style:{gridColumnGap:s}},a.map(((e,a)=>(0,l.createElement)(I,{attributes:t,post:e,index:a,isLoading:n,setAttributes:r}))))}function q(e){let{attributes:t,setAttributes:a}=e;const{query:{categories:n,_embed:r,per_page:o,tags:s,types:i,order:c,orderby:u}={}}=t,[m,d]=(0,l.useState)(null),[g,p]=(0,l.useState)("is-loading");return(0,l.useEffect)((()=>{const e={...n.length>0&&{categories:n},...s.length>0&&{tags:s},context:"edit",_embed:r,per_page:o,order:c,orderby:u},t=(0,O.addQueryArgs)(`/wp/v2/${i}`,e);p(!0),N()({path:t}).then((e=>{0!=e.length&&(d(e),p(!1))}))}),[n,o,c,u,s,i]),(0,l.createElement)(L,{attributes:t,posts:m,isLoading:g,setAttributes:a})}const H=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":2,"name":"bca/template-builder","version":"0.1.0","title":"Template Builder","category":"widgets","icon":"columns","description":"Select template for posts.","attributes":{"layout":{"type":"string","default":"list"},"postSettings":{"type":"object","default":{"showThumbnail":true,"thumbnailAlignment":"","thumbnailSize":"thumbnail","showAuthor":true,"showAuthorIcon":false,"showDate":true,"showExcerpt":false,"showCategories":false,"titleFontSize":"22px"}},"posts":{"type":"array","default":[]},"query":{"type":"object","default":{"_embed":true,"offset":0,"order":"desc","orderby":"date","per_page":4,"types":"posts","categories":[],"tags":[]}},"template":{"type":"string","default":"1"},"columns":{"type":"number","default":3},"gridGap":{"type":"number","default":15},"textAlignment":{"type":"string","default":""}},"supports":{"anchor":true,"align":true,"className":true,"color":{"background":true,"link":true,"text":true},"html":false,"spacing":{"margin":true,"padding":true,"blockGap":true}},"textdomain":"bca-template-builder","editorScript":"file:./index.js","editorStyle":"file:./index.css","style":"file:./style-index.css"}');(0,n.registerBlockType)(H,{edit:function(e){const{attributes:t,setAttributes:a}=e;return(0,l.createElement)(s.Fragment,null,(0,l.createElement)(o.BlockControls,null,(0,l.createElement)(o.AlignmentToolbar,{value:t.textAlignment,onChange:e=>{a({textAlignment:e})}})),(0,l.createElement)(D,{attributes:t,setAttributes:a}),(0,l.createElement)("div",(0,o.useBlockProps)(),(0,l.createElement)(q,{attributes:t,setAttributes:a})))},save:function(){return(0,l.createElement)("p",o.useBlockProps.save(),(0,r.__)("Bca Template Builder – hello from the saved content!","bca-template-builder"))}})}},a={};function n(e){var l=a[e];if(void 0!==l)return l.exports;var r=a[e]={exports:{}};return t[e](r,r.exports,n),r.exports}n.m=t,e=[],n.O=(t,a,l,r)=>{if(!a){var o=1/0;for(u=0;u<e.length;u++){for(var[a,l,r]=e[u],s=!0,i=0;i<a.length;i++)(!1&r||o>=r)&&Object.keys(n.O).every((e=>n.O[e](a[i])))?a.splice(i--,1):(s=!1,r<o&&(o=r));if(s){e.splice(u--,1);var c=l();void 0!==c&&(t=c)}}return t}r=r||0;for(var u=e.length;u>0&&e[u-1][2]>r;u--)e[u]=e[u-1];e[u]=[a,l,r]},n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var a in t)n.o(t,a)&&!n.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e;n.g.importScripts&&(e=n.g.location+"");var t=n.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var a=t.getElementsByTagName("script");a.length&&(e=a[a.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=e})(),(()=>{var e={826:0,431:0};n.O.j=t=>0===e[t];var t=(t,a)=>{var l,r,[o,s,i]=a,c=0;if(o.some((t=>0!==e[t]))){for(l in s)n.o(s,l)&&(n.m[l]=s[l]);if(i)var u=i(n)}for(t&&t(a);c<o.length;c++)r=o[c],n.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return n.O(u)},a=globalThis.webpackChunkbca_template_builder=globalThis.webpackChunkbca_template_builder||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))})();var l=n.O(void 0,[431],(()=>n(574)));l=n.O(l)})();